<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>love2019</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<style type="text/css">

		@font-face {

			font-family: digit;

			src: url('digital-7_mono.ttf') format("truetype");

		}
		#code{
			display: none;
		}

	#loveImg{
		position:relative;
		left:380px;
		top:-94px;
		padding: 2px;
		width:100px;height:100px;
		display:none;
		border: 10px solid;
		border: 1px solid transparent;
		border-radius: 200px;
		background: linear-gradient(to right,#ff9a9e 0%, #fecfef 99%, #fecfef 100%);
		transition: all 0.6s;
	}
	#loveImg:hover{
		transform: scale(1.4);
	}

	#chrismasBell{
		width: 5vw;
		height: 8vh;
		position:relative;
		left:400px;
		top:-95px;
		display:none;
		cursor: pointer;
	}
	</style>
<link href="css/default.css" type="text/css" rel="stylesheet"/>
	<link href="../../component/shake/shake-master-150111210025/css/shake.css" type="text/css" rel="stylesheet">
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/garden.js"></script>
	<script type="text/javascript" src="js/functions.js"></script>
</head>
<body>
<div id="mainDiv">
<div id="content">
<div id="code">
<span class="comments">/**</span><br />
<span class="space" /><span class="comments">* We are both Fudan SSers and programmers,</span><br />
<span class="space" /><span class="comments">* so I write some code to celebrate our 1st anniversary.</span><br />
<span class="space" /><span class="comments">*/</span><br />
Boy i = <span class="keyword">new</span> Boy(<span class="string">"hackerzhou"</span>);<br />
Girl u = <span class="keyword">new</span> Girl(<span class="string">"MaryNee"</span>);<br />
<span class="comments">// Nov 2, 2010, I told you I love you. </span><br />
i.love(u);<br />
<span class="comments">// Luckily, you accepted and became my girlfriend eversince.</span><br />
u.accepted();<br />
<span class="comments">// Since then, I miss u every day.</span><br />
i.miss(u);<br />
<span class="comments">// And take care of u and our love.</span><br />
i.takeCareOf(u);<br />
<span class="comments">// You say that you won't be so easy to marry me.</span><br />
<span class="comments">// So I keep waiting and I have confidence that you will.</span><br />
<span class="keyword">boolean</span> isHesitate = <span class="keyword">true</span>;<br />
<span class="keyword">while</span> (isHesitate) {<br />
<span class="placeholder" />i.waitFor(u);<br />
<span class="placeholder" /><span class="comments">// I think it is an important decision</span><br />
<span class="placeholder" /><span class="comments">// and you should think it over.</span><br />
<span class="placeholder" />isHesitate = u.thinkOver();<br />
}<br />
<span class="comments">// After a romantic wedding, we will live happily ever after.</span><br />
i.marry(u);<br />
i.liveHappilyWith(u);<br />
</div>
<div id="loveHeart">
<canvas id="garden"></canvas>
<div id="words">
<div id="messages">
Minyue, I have fallen in love with you for
<div id="elapseClock"></div>
</div>
<div id="loveu">
Love u forever and ever.<br />
<div class="signature">- hackerzhou</div>
</div>
	<img id="loveImg" src="img/mm.jpg"/>
	<img id="chrismasBell" onclick="backChristmas()" class="shake shake-rotate" src="img/ChristmasBell .png"/>
</div>
</div>
</div>
</div>
<script type="text/javascript">
		(function(){//code中元素在刷新时存在闪现后在重新加载的效果，体验不好，所以在样式中先将其隐藏，在显示解决闪现问题
			$("#code").css("display", "block");
		})()

		var offsetX = $("#loveHeart").width() / 2;

		var offsetY = $("#loveHeart").height() / 2 - 55;

		var together = new Date();

		together.setFullYear(2010, 10, 2);

		together.setHours(20);

		together.setMinutes(0);

		together.setSeconds(0);

		together.setMilliseconds(0);

		

		if (!document.createElement('canvas').getContext) {
			console.info(1)

			var msg = document.createElement("div");

			msg.id = "errorMsg";

			msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 

			document.body.appendChild(msg);

			$("#code").css("display", "none")

			$("#copyright").css("position", "absolute");

			$("#copyright").css("bottom", "10px");

		    document.execCommand("stop");

		} else {

			setTimeout(function () {
				
				Music();//执行播放音乐
				startHeartAnimation();
				
			}, 5000);



			timeElapse(together);

			setInterval(function () {

				timeElapse(together);

			}, 500);



			adjustCodePosition();

			$("#code").typewriter();

		}
		var m = null;
		//播放音乐
		function Music(){
			m = document.createElement("AUDIO");
			m.src="music/bgm.mp3";
			m.setAttribute("controls","controls");
			// console.log("就绪状态",m.readyState)
			if(m.readyState == 0){
				// console.log("暂停状态",m.paused);
				if(m.paused) m.load();//如果当前状态为暂停就重新加载播放
				m.play();
			}
			
			//监听暂停状态
			setInterval(()=>{
				if(m.paused){
					m.load();
					m.play();
				}
			},1000);
		}

		function backChristmas() {
			$('#mainDiv').fadeOut('slow',function(){
				window.location.href = "../christmas2019/index.html";

			});
		}
		

	</script>
</body>
</html>
